var callbackName,callbackRegEx,ref,ref1,scriptTag,tag,hasProp={}.hasOwnProperty;this.OverlappingMarkerSpiderfier=(function(){var t,r,e,i,s,n,a,o,l,h;for(i=0,a=(t=class{constructor(t,i={}){var s,o,h,u;for(s in this.map=t,null==this.constructor.hasInitialized&&(this.constructor.hasInitialized=!0,r=(e=google.maps).event,n=e.MapTypeId,a.keepSpiderfied=!1,a.ignoreMapClick=!1,a.markersWontHide=!1,a.markersWontMove=!1,a.basicFormatEvents=!1,a.nearbyDistance=20,a.circleSpiralSwitchover=9,a.circleFootSeparation=23,a.circleStartAngle=l/12,a.spiralFootSeparation=26,a.spiralLengthStart=11,a.spiralLengthFactor=4,a.spiderfiedZIndex=e.Marker.MAX_ZINDEX+2e4,a.highlightedLegZIndex=e.Marker.MAX_ZINDEX+1e4,a.usualLegZIndex=e.Marker.MAX_ZINDEX+1,a.legWeight=1.5,a.legColors={usual:{},highlighted:{}},h=a.legColors.usual,o=a.legColors.highlighted,h[n.HYBRID]=h[n.SATELLITE]="#fff",o[n.HYBRID]=o[n.SATELLITE]="#f00",h[n.TERRAIN]=h[n.ROADMAP]="#444",o[n.TERRAIN]=o[n.ROADMAP]="#f00",this.constructor.ProjHelper=function(t){return this.setMap(t)},this.constructor.ProjHelper.prototype=new e.OverlayView,this.constructor.ProjHelper.prototype.draw=function(){}),i)hasProp.call(i,s)&&(u=i[s],this[s]=u);this.projHelper=new this.constructor.ProjHelper(this.map),this.initMarkerArrays(),this.listeners={},this.formatIdleListener=this.formatTimeoutId=null,this.addListener("click",function(t,e){return r.trigger(t,"spider_click",e)}),this.addListener("format",function(t,e){return r.trigger(t,"spider_format",e)}),this.ignoreMapClick||r.addListener(this.map,"click",()=>this.unspiderfy()),r.addListener(this.map,"maptypeid_changed",()=>this.unspiderfy()),r.addListener(this.map,"zoom_changed",()=>{if(this.unspiderfy(),!this.basicFormatEvents)return this.formatMarkers()})}}).prototype,s=(o=[t,a]).length;i<s;i++)(h=o[i]).VERSION="1.0.3";return l=2*Math.PI,e=r=n=null,t.markerStatus={SPIDERFIED:"SPIDERFIED",SPIDERFIABLE:"SPIDERFIABLE",UNSPIDERFIABLE:"UNSPIDERFIABLE",UNSPIDERFIED:"UNSPIDERFIED"},a.initMarkerArrays=function(){return this.markers=[],this.markerListenerRefs=[]},a.isVisibleMarker=function(t){return null!==t.map&&t.map.getBounds().contains(t.position)},a.addMarker=function(t,r){return t.setMap(this.map),this.trackMarker(t,r)},a.trackMarker=function(t,e){var i;return null!=t._oms||(t._oms=!0,i=[r.addListener(t,"click",r=>this.spiderListener(t,r))],this.markersWontHide||i.push(r.addListener(t,"visible_changed",()=>this.markerChangeListener(t,!1))),this.markersWontMove||i.push(r.addListener(t,"position_changed",()=>this.markerChangeListener(t,!0))),null!=e&&i.push(r.addListener(t,"spider_click",e)),this.markerListenerRefs.push(i),this.markers.push(t),this.basicFormatEvents?this.trigger("format",t,this.constructor.markerStatus.UNSPIDERFIED):(this.trigger("format",t,this.constructor.markerStatus.UNSPIDERFIABLE),this.formatMarkers())),this},a.markerChangeListener=function(t,r){if(!this.spiderfying&&!this.unspiderfying)return null!=t._omsData&&(r||!this.isVisibleMarker(t))&&this.unspiderfy(r?t:null),this.formatMarkers()},a.getMarkers=function(){return this.markers.slice(0)},a.removeMarker=function(t){return this.forgetMarker(t),t.setMap(null)},a.forgetMarker=function(t){var e,i,s,n,a;if(null!=t._omsData&&this.unspiderfy(),(e=this.arrIndexOf(this.markers,t))<0)return this;for(i=0,s=(a=this.markerListenerRefs.splice(e,1)[0]).length;i<s;i++)n=a[i],r.removeListener(n);return delete t._oms,this.markers.splice(e,1),this.formatMarkers(),this},a.removeAllMarkers=a.clearMarkers=function(){var t,r,e,i;for(i=this.getMarkers(),this.forgetAllMarkers(),t=0,r=i.length;t<r;t++)(e=i[t]).setMap(null);return this},a.forgetAllMarkers=function(){var t,e,i,s,n,a,o,l,h;for(this.unspiderfy(),h=this.markers,t=e=0,i=h.length;e<i;t=++e){for(l=0,o=h[t],s=(a=this.markerListenerRefs[t]).length;l<s;l++)n=a[l],r.removeListener(n);delete o._oms}return this.initMarkerArrays(),this},a.addListener=function(t,r){var e;return(null!=(e=this.listeners)[t]?e[t]:e[t]=[]).push(r),this},a.removeListener=function(t,r){var e;return(e=this.arrIndexOf(this.listeners[t],r))<0||this.listeners[t].splice(e,1),this},a.clearListeners=function(t){return this.listeners[t]=[],this},a.trigger=function(t,...r){var e,i,s,n,a,o;for(i=0,a=null!=(n=this.listeners[t])?n:[],o=[],s=a.length;i<s;i++)e=a[i],o.push(e(...r));return o},a.generatePtsCircle=function(t,r){var i,s,n,a,o,h,u,p;for(h=(n=this.circleFootSeparation*(2+t))/l,s=l/t,p=[],a=o=0,u=t;0<=u?o<u:o>u;a=0<=u?++o:--o)i=this.circleStartAngle+a*s,p.push(new e.Point(r.x+h*Math.cos(i),r.y+h*Math.sin(i)));return p},a.generatePtsSpiral=function(t,r){var i,s,n,a,o,h,u;for(a=this.spiralLengthStart,i=0,u=[],s=n=0,h=t;0<=h?n<h:n>h;s=0<=h?++n:--n)i+=this.spiralFootSeparation/a+5e-4*s,o=new e.Point(r.x+a*Math.cos(i),r.y+a*Math.sin(i)),a+=l*this.spiralLengthFactor/i,u.push(o);return u},a.spiderListener=function(t,r){var e,i,s,n,a,o,l,h,u,p,c;if((o=null!=t._omsData)&&this.keepSpiderfied||this.unspiderfy(),o||this.map.getStreetView().getVisible()||"GoogleEarthAPI"===this.map.getMapTypeId())return this.trigger("click",t,r);for(e=0,h=[],u=[],p=(l=this.nearbyDistance)*l,a=this.llToPt(t.position),i=(c=this.markers).length;e<i;e++)null!=(s=c[e]).map&&this.isVisibleMarker(s)&&(n=this.llToPt(s.position),this.ptDistanceSq(n,a)<p?h.push({marker:s,markerPt:n}):u.push(s));return 1===h.length?this.trigger("click",t,r):this.spiderfy(h,u)},a.markersNearMarker=function(t,r=!1){var e,i,s,n,a,o,l,h,u,p,c;if(null==this.projHelper.getProjection())throw"Must wait for 'idle' event on map before calling markersNearMarker";for(e=0,h=(l=this.nearbyDistance)*l,a=this.llToPt(t.position),o=[],i=(u=this.markers).length;e<i&&!((s=u[e])!==t&&null!=s.map&&this.isVisibleMarker(s)&&(n=this.llToPt(null!=(p=null!=(c=s._omsData)?c.usualPosition:void 0)?p:s.position),this.ptDistanceSq(n,a)<h&&(o.push(s),r)));e++);return o},a.markerProximityData=function(){var t,r,e,i,s,n,a,o,l,h,u,p,c,g,f,m;if(null==this.projHelper.getProjection())throw"Must wait for 'idle' event on map before calling markersNearAnyOtherMarker";for(g=(c=this.nearbyDistance)*c,u=(function(){var t,r,e,i,s,a;for(t=0,e=this.markers,a=[],r=e.length;t<r;t++)n=e[t],a.push({pt:this.llToPt(null!=(i=null!=(s=n._omsData)?s.usualPosition:void 0)?i:n.position),willSpiderfy:!1});return a}).call(this),f=this.markers,t=e=0,i=f.length;e<i;t=++e)if(null!=(a=f[t]).map&&this.isVisibleMarker(a)&&!(o=u[t]).willSpiderfy)for(m=this.markers,r=p=0,s=m.length;p<s;r=++p){if(l=m[r],r!==t&&null!=l.map&&this.isVisibleMarker(l)){if(h=u[r],(!(r<t)||h.willSpiderfy)&&this.ptDistanceSq(o.pt,h.pt)<g){o.willSpiderfy=h.willSpiderfy=!0;break}}}return u},a.markersNearAnyOtherMarker=function(){var t,r,e,i,s,n,a;for(s=this.markerProximityData(),n=this.markers,a=[],t=r=0,e=n.length;r<e;t=++r)i=n[t],s[t].willSpiderfy&&a.push(i);return a},a.setImmediate=function(t){return window.setTimeout(t,0)},a.formatMarkers=function(){if(!this.basicFormatEvents&&null==this.formatTimeoutId)return this.formatTimeoutId=this.setImmediate(()=>(this.formatTimeoutId=null,null!=this.projHelper.getProjection())?this._formatMarkers():null==this.formatIdleListener?this.formatIdleListener=r.addListenerOnce(this.map,"idle",()=>this._formatMarkers()):void 0)},a._formatMarkers=function(){var t,r,e,i,s,n,a,o,l,h,u;if(this.basicFormatEvents){for(r=0,l=[],e=markers.length;r<e;r++)u=null!=(s=markers[r])._omsData?"SPIDERFIED":"UNSPIDERFIED",l.push(this.trigger("format",s,this.constructor.markerStatus[u]));return l}for(a=this.markerProximityData(),o=this.markers,h=[],t=n=0,i=o.length;n<i;t=++n)u=null!=(s=o[t])._omsData?"SPIDERFIED":a[t].willSpiderfy?"SPIDERFIABLE":"UNSPIDERFIABLE",h.push(this.trigger("format",s,this.constructor.markerStatus[u]));return h},a.makeHighlightListenerFuncs=function(t){return{highlight:()=>t._omsData.leg.setOptions({strokeColor:this.legColors.highlighted[this.map.mapTypeId],zIndex:this.highlightedLegZIndex}),unhighlight:()=>t._omsData.leg.setOptions({strokeColor:this.legColors.usual[this.map.mapTypeId],zIndex:this.usualLegZIndex})}},a.spiderfy=function(t,i){var s,n,a,o,l,h,u,p,c,g,f;return this.spiderfying=!0,g=t.length,s=this.ptAverage(function(){var r,e,i;for(r=0,i=[],e=t.length;r<e;r++)p=t[r],i.push(p.markerPt);return i}()),o=g>=this.circleSpiralSwitchover?this.generatePtsSpiral(g,s).reverse():this.generatePtsCircle(g,s),f=(function(){var i,s,p;for(i=0,p=[],s=o.length;i<s;i++)a=o[i],n=this.ptToLl(a),u=(c=this.minExtract(t,t=>this.ptDistanceSq(t.markerPt,a))).marker,h=new e.Polyline({map:this.map,path:[u.position,n],strokeColor:this.legColors.usual[this.map.mapTypeId],strokeWeight:this.legWeight,zIndex:this.usualLegZIndex}),u._omsData={usualPosition:u.position,usualZIndex:u.zIndex,leg:h},this.legColors.highlighted[this.map.mapTypeId]!==this.legColors.usual[this.map.mapTypeId]&&(l=this.makeHighlightListenerFuncs(u),u._omsData.hightlightListeners={highlight:r.addListener(u,"mouseover",l.highlight),unhighlight:r.addListener(u,"mouseout",l.unhighlight)}),this.trigger("format",u,this.constructor.markerStatus.SPIDERFIED),u.position=n,u.zIndex=Math.round(this.spiderfiedZIndex+a.y),p.push(u);return p}).call(this),delete this.spiderfying,this.spiderfied=!0,this.trigger("spiderfy",f,i)},a.unspiderfy=function(t=null){var e,i,s,n,a,o,l,h;if(null==this.spiderfied)return this;for(e=0,this.unspiderfying=!0,h=[],a=[],i=(o=this.markers).length;e<i;e++)null!=(n=o[e])._omsData?(n._omsData.leg.setMap(null),n!==t&&(n.position=n._omsData.usualPosition),n.zIndex=n._omsData.usualZIndex,null!=(s=n._omsData.hightlightListeners)&&(r.removeListener(s.highlight),r.removeListener(s.unhighlight)),delete n._omsData,n!==t&&(l=this.basicFormatEvents?"UNSPIDERFIED":"SPIDERFIABLE",this.trigger("format",n,this.constructor.markerStatus[l])),h.push(n)):a.push(n);return delete this.unspiderfying,delete this.spiderfied,this.trigger("unspiderfy",h,a),this},a.ptDistanceSq=function(t,r){var e,i;return(e=t.x-r.x)*e+(i=t.y-r.y)*i},a.ptAverage=function(t){var r,i,s,n,a,o;for(r=0,a=o=0,i=t.length;r<i;r++)a+=(n=t[r]).x,o+=n.y;return s=t.length,new e.Point(a/s,o/s)},a.llToPt=function(t){return this.projHelper.getProjection().fromLatLngToDivPixel(t)},a.ptToLl=function(t){return this.projHelper.getProjection().fromDivPixelToLatLng(t)},a.minExtract=function(t,r){var e,i,s,n,a,o,l;for(s=a=0,o=t.length;a<o;s=++a)l=r(n=t[s]),(null==e||l<i)&&(i=l,e=s);return t.splice(e,1)[0]},a.arrIndexOf=function(t,r){return null!=t.indexOf?t.indexOf(r):-1},t}).call(this),callbackRegEx=/(\?.*(&|&amp;)|\?)spiderfier_callback=(\w+)/,null==(scriptTag=document.currentScript)&&(scriptTag=function(){var t,r,e,i,s;for(t=0,e=document.getElementsByTagName("script"),s=[],r=e.length;t<r;t++)(null!=(i=(tag=e[t]).getAttribute("src"))?i.match(callbackRegEx):void 0)&&s.push(tag);return s}()[0]),null!=scriptTag&&(callbackName=null!=(ref=scriptTag.getAttribute("src"))&&null!=(ref1=ref.match(callbackRegEx))?ref1[3]:void 0)&&"function"==typeof window[callbackName]&&window[callbackName](),"function"==typeof window.spiderfier_callback&&window.spiderfier_callback();